webpackJsonp([5],{"1BMs":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("3cXf"),a=s.n(i),n={name:"ecAddress",data:function(){return{ChinaList:[],isActive:0,isNow:0,isCurrent:0,contentHeight:0,chooseList:new Array(4),addrLists:new Array(4),isChoosed:new Array(4),cityId:[],selectAddr:{}}},watch:{ifAddress:function(){"new"===this.ifAddress&&(this.isCurrent=0,this.isActive=this.isNow=0,this.chooseList=new Array(4))}},props:["area","ifAddress","listHeight"],created:function(){this.getAddress()},methods:{getAddress:function(){var t=this;this.$api.getChinaList().then(function(e){t.ChinaList=e})},findAreaById:function(){var t=this;this.ChinaList.map(function(e){e.Id===t.area[0]&&(t.selectAddress(e,0,"update"),e.childs.map(function(e){e.Id===t.area[1]&&(t.selectAddress(e,1,"update"),e.childs.map(function(e){e.Id===t.area[2]&&(t.selectAddress(e,2,"update"),e.childs.length&&e.childs.map(function(e){e.Id===t.area.streetId&&t.selectAddress(e,3,"update")}))}))}))})},selectAddress:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!t.childs)return this.chooseList.splice(e,1,t.name),this.selectAddr.addr=this.chooseList.filter(function(t){return""!==t}).join(" "),e<=2?this.cityId.splice(e,1,t.code):this.selectAddr.streetId=t.code,void(s||(this.$emit("sendVal",this.selectAddr),this.cityId=[],this.selectAddr={},this.isCurrent=0,this.isActive=this.isNow=0,this.chooseList=new Array(4)));this.cityId.splice(e,1,t.code),this.selectAddr.cityId=this.cityId,this.addrLists.splice(e+1,1,t.childs),this.isActive=this.isNow=e+1,this.chooseList.splice(e,1,t.name),this.isCurrent=e+1},chooseAddress:function(t){this.isCurrent=t,this.isActive=this.isNow=t,this.chooseList.splice(t,1,""),t||(this.chooseList=new Array(4))},closeAddressPopup:function(){this.$emit("closeAddressPopup")}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"address"},[s("div",{staticClass:"address-header"},[s("div",{staticClass:"header-title"},[t._v("选择地址")]),t._v(" "),s("div",{staticClass:"goBack",on:{click:t.closeAddressPopup}},[s("span",{staticClass:"goBack-icon iconfont icon-arrow_left"})])]),t._v(" "),s("div",{ref:"nav",staticClass:"address-nav"},[s("ul",t._l(t.chooseList,function(e,i){return t.isNow>=i?s("li",{key:i,class:{active:t.isActive===i},on:{click:function(e){t.chooseAddress(i)}}},[t._v(t._s(e||"请选择")+"\n      ")]):t._e()}))]),t._v(" "),s("div",{staticClass:"address-group"},[s("div",{staticClass:"address-content",style:{height:t.listHeight+"px"}},[0===t.isCurrent?s("div",{staticClass:"column province"},t._l(t.ChinaList,function(e,i){return s("mt-cell",{key:i,class:{isActive:e.name===t.chooseList[0]},attrs:{title:e.name,"is-link":""},nativeOn:{click:function(s){t.selectAddress(e,0)}}})})):t._e(),t._v(" "),1===t.isCurrent?s("div",{staticClass:"column city"},t._l(t.addrLists[1],function(e,i){return s("mt-cell",{key:i,class:{isActive:e.name===t.chooseList[1]},attrs:{title:e.name,"is-link":""},nativeOn:{click:function(s){t.selectAddress(e,1)}}})})):t._e(),t._v(" "),2===t.isCurrent?s("div",{staticClass:"column area"},t._l(t.addrLists[2],function(e,i){return s("mt-cell",{key:i,class:{isActive:e.name===t.chooseList[2]},attrs:{title:e.name,"is-link":""},nativeOn:{click:function(s){t.selectAddress(e,2)}}})})):t._e(),t._v(" "),3===t.isCurrent?s("div",{staticClass:"column town"},t._l(t.addrLists[3],function(e,i){return s("mt-cell",{key:i,class:{isActive:e.name===t.chooseList[3]},attrs:{title:e.name,"is-link":""},nativeOn:{click:function(s){t.selectAddress(e,3)}}})})):t._e()])])])},staticRenderFns:[]};var r=s("Z0/y")(n,c,!1,function(t){s("1JKA")},"data-v-f3457eb0",null).exports,d=s("yclV"),l={data:function(){return{rp:{province:"",city:"",country:"",addressDetail:"",defaultState:!1,name:"",tel:""},area:"",popupVisible:!1,contentHeight:0}},components:{addressList:r},computed:{isDisabled:function(){return!(this.area&&this.rp.name&&this.rp.addressDetail&&this.rp.tel&&Object(d.c)(this.rp.tel))}},mounted:function(){this.contentHeight=document.documentElement.clientHeight-89},methods:{openPopup:function(){this.popupVisible=!0},getVal:function(t){var e=t.addr.split(" ");this.closeChoosePopup(),this.area=t.addr,this.rp.province=e[0],this.rp.city=e[1],this.rp.country=e[2]},closeChoosePopup:function(){this.popupVisible=!1},saveAddress:function(){var t=this;if(!this.isDisabled){var e=JSON.parse(a()(this.rp));e.defaultState=e.defaultState?"1":"0",this.$api.addAddress(e).then(function(e){"success"===e.type&&t.$router.back()})}}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"add-address page"},[s("mt-header",{attrs:{fixed:"",title:"添加收货地址"}},[s("div",{attrs:{slot:"left"},on:{click:function(e){t.$router.back()}},slot:"left"},[s("mt-button",{attrs:{icon:"back"}})],1)]),t._v(" "),s("div",{staticClass:"add-form"},[s("mt-field",{attrs:{label:"收货人",placeholder:"姓名"},model:{value:t.rp.name,callback:function(e){t.$set(t.rp,"name",e)},expression:"rp.name"}}),t._v(" "),s("mt-field",{attrs:{label:"联系电话",placeholder:"手机或固话",type:"tel"},model:{value:t.rp.tel,callback:function(e){t.$set(t.rp,"tel",e)},expression:"rp.tel"}}),t._v(" "),s("mt-cell",{staticClass:"selecte-add",attrs:{title:"选择地区","is-link":"",value:t.area},nativeOn:{click:function(e){t.openPopup(e)}}}),t._v(" "),s("mt-field",{attrs:{label:"详细地址",placeholder:"街道门牌信息",type:"textarea",rows:"2"},model:{value:t.rp.addressDetail,callback:function(e){t.$set(t.rp,"addressDetail",e)},expression:"rp.addressDetail"}}),t._v(" "),s("mt-cell",{staticClass:"set-default",attrs:{title:"设为默认"}},[s("mt-switch",{model:{value:t.rp.defaultState,callback:function(e){t.$set(t.rp,"defaultState",e)},expression:"rp.defaultState"}})],1),t._v(" "),s("div",{staticClass:"action-handle"},[s("mt-button",{staticClass:"save-btn",attrs:{size:"large",type:"primary",disabled:t.isDisabled},on:{click:t.saveAddress}},[t._v("\n        保存\n      ")])],1)],1),t._v(" "),s("mt-popup",{staticClass:"a-popup",attrs:{position:"bottom",modal:!1},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("keep-alive",[s("address-list",{attrs:{listHeight:t.contentHeight},on:{sendVal:t.getVal,closeAddressPopup:t.closeChoosePopup}})],1)],1)],1)},staticRenderFns:[]};var u=s("Z0/y")(l,o,!1,function(t){s("SSiY")},null,null);e.default=u.exports},"1JKA":function(t,e){},"7iGg":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("yclV"),a={data:function(){return{curIndex:0,addressList:[]}},created:function(){this.getAddressList()},methods:{getAddressList:function(){var t=this;this.$api.reciveAddressList({id:"",orderBy:"",page:"",pageSize:"",queryParamList:[]}).then(function(e){(e=e.content).forEach(function(t){t.selected=!1,1*t.defaultState>0&&(t.selected=!0)}),t.addressList=e})},selectedAddress:function(t){this.curIndex=t,this.addressList.forEach(function(t){t.selected=!1}),this.addressList[t].selected=!0},confirmAddress:function(){var t=this,e={id:this.$route.query.id,addressId:this.addressList[this.curIndex].id};this.$api.productExchange(e).then(function(e){if("warning"===e.type)t.$toast(e.text),setTimeout(function(){t.$router.back()},1e3);else if(1*t.$route.query.needPay==1){var s=JSON.parse(e.text);Object(i.d)("paPara",s),t.$router.replace("/payment")}else t.$router.replace({name:"exchangeSuccess",query:{type:e.type}})})}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"address-list page"},[s("mt-header",{attrs:{fixed:"",title:"选择收货地址"}},[s("div",{attrs:{slot:"left"},on:{click:function(e){t.$router.back()}},slot:"left"},[s("mt-button",{attrs:{icon:"back"}})],1)]),t._v(" "),s("div",{staticClass:"address-list-wrap"},[s("router-link",{staticClass:"add-address",attrs:{to:"/add-address"}},[t._v("添加新地址")]),t._v(" "),t._l(t.addressList,function(e,i){return s("div",{key:e.id,staticClass:"address-list-item",on:{click:function(e){t.selectedAddress(i)}}},[s("div",{staticClass:"hd"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"tel"},[t._v(t._s(e.tel))])]),t._v(" "),s("div",{staticClass:"bd"},[1*e.defaultState>0?s("span",{staticClass:"default"},[t._v("[默认地址]")]):t._e(),t._v("\n        "+t._s(e.address)+"\n      ")]),t._v(" "),e.selected?s("span",{staticClass:"selected-icon"}):t._e()])})],2),t._v(" "),s("button",{staticClass:"confirm-address",attrs:{type:"button"},on:{click:t.confirmAddress}},[t._v("确认")])],1)},staticRenderFns:[]};var c=s("Z0/y")(a,n,!1,function(t){s("HIle")},null,null);e.default=c.exports},HIle:function(t,e){},SSiY:function(t,e){}});